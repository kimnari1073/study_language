# Debugging
## 소프트웨어 개발
- 분석 -> 설계 -> 구현(소스코드)
- 구현된 소스 코드에 대한 검증
  - 소스 코드 내에 매크로 등을 이용하여 테스트 코드 삽입
  - 오류 처리 기능(errno, perror, assert) 등을 이용한 오류 분석
  - **GDB 와 같은 디버거 사용**
## GDB (GNU DeBugger)
- GNU 프로젝트의 디버거
- C,C++,Objective-C, Modular 2, Ada 등의 언어 지원
- 기능
  - 프로그램을 시작한다. (run)
  - 프로그램이 특정 조건을 만족할 때 정지시킨다. (break)
  - 프로그램이 정지했을 때 어떤 일이 벌어졌는지 조사한다.
  - 프로그램 일부를 수정하여 발견한 버그를 제거했을 때의 실행 결과를 미리 알아볼 수 있게 한다.
- 요구사항
  - GCC 컴파일 시에 "-g" 옵션을 사용하여 디버깅 정보를 오브젝트 코드에 삽입
  - 디버깅 수준에 따라 -g1 -g2 -g3등과 같이 명시
    - 명시하지 않으면 기본적으로 -g2 옵션 사용
- 공식 홈페이지 : http://www.gnu.org/software/gdb/
## GDB 사용 명령어
source code file name: test.c
1. 실행 파일 생성 명령 
  ```
  $ gcc -g test.c -o test
  ```
- // -o : 목적파일명 지정 (.out)
2. 디버깅 모드 전환
  ```
  $ gdb test.c
  ```
3. GDB 모드에서 명령어
  - quit : GDB 모드 종료
  - help : 명령어 클래스에 대한 도움말 조회
  - ```
    help status //status에 대한 도움말
    ```
  - watchpoint : 인자에 변수명을 사용해 변수에 대한 경계점을 설정한다.
### file 클래스
작업 디렉토리 설정/검색, 실행 파일 지정 등의 파일과 관련된 명령어 모음
  - cd : 디버거와 디버깅중인 프로그램에 대한 작업 디렉토리 변경
  - directory: 소스 파일에 대한 탐색 경로를 추가
  - file : 디버깅할 파일을 지정함.
  - ```
    $ gdb
    (gdb) file test.c
    ```
  - **list : 지정된 함수 또는 줄을 보여줌**
  - path: 목적 파일에 대한 탐색경로를 추가
  - pwd : 현재의 작업 디렉토리를 보여줌.
  - search : 정규 수식을 가장 최근에 보여진 줄 다음부터 탐색함.
### running 클래스
단계별 실행과 관련된 명령어 모음
  - **run: 디버깅할 프로그램을 시작함.**
  - ```
    (gdb) run 3 //프로그램 인자를 3으로 지정
    ```
  - continue: 디버깅중인 프로그램의 진행을 계속함
  - kill : 디버깅중인 프로그램의 실행을 정지함
  - step : 다음 줄에 도달할 때까지 프로그램을 진행시킴. 인자 N은 이를 N번 반복함을 의미함. 함수 호출을 하게 되면 해당 함수로 제어가 넘어간다.
  - next : step 명령어와 비슷하나, 함수 호출을 하나의 단위로 보아 함수 안을 디버깅할 수 없음. 올바르게 동작하는 함수의 경우 더 이상 디버깅이 필요없을 때 사용하면 편리함.
### Breakpoints 클래스
프로그램을 특정 지점에서 정지하게 하기 위한 명령어 모음
  - **break: 소스 내의 특정 줄이나 특정 함수에 대한 정지점**, breakpoint를 설정할 때 사용함. break 명령어의 인자로 줄 번호가 지정되면 해당 줄 번호에 정지점이 설명되며, 인자로 함수 이름이 지정되면 함수의 시작 부분에 정지점이 설정됨.
  - watch: 변수 등에 대한 경계점(watchpoint)을 설정할 때 사용됨. 지정된 경계점의 값이 변경될 경우 프로그램 실행을 정지함.
  - clear: 특정 줄이나 특정 함수에 설정된 정지점을 해제할 때 사용함.
  - delete: 정지점 등을 해제할 때 사용함. clear와 달리 정지점의 번호를 인자로 사용함.
### Data 클래스
변수, 메모리의 정보를 검색하고 설정하는 명령어 모음
  - **display: 프로그램 실행이 정지될 때마다 특정 수식의 값을 자동적으로 보여줌. 디버깅할 때 특정 변수의 값이 변동하는 것을 관찰할 때 편리함.**
  - delete display: display 명령어에 의하여 지정된 수식을 제거함.
  - **print: 해당 수식의 값을 보여줌. display 명령어와 달리 일회성의 성격을 띰**
  - set variable: 특정 변수의 값을 설정하는 데 사용함. 디버깅하면서 특정 변수의 값을 변화시켜 가면서 프로그램의 변화를 살펴보는데 유용함.
  - ```
    (gdb) set args3 //디버깅할 인자를 3으로 지정
    ```
  - whatis: 해당 수식의 데이터 형을 보여줌.
### Info 클래스
디버깅 중인 프로그램에 대한 여러 정보를 보여주는 명령어 모음
  - info args: 프로그램 인자에 대한 정보를 보여줌.
  - info breakpoints: 지정된 정지점에 대한 정보를 보여줌.
  - info display: display 명령어에 의하여 지정된 수식 정보를 보여줌.
  - **info files: 디버깅중인 프로그램에 대한 정보를 보여줌.**
  - **info locals: 현재 스택 프레임내 지역 변수에 대한 정보를 보여줌.**
  - info types: 현재 정의된 데이터형에 대한 정보를 보여줌.
